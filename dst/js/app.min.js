"use strict";/*! Copyright Jan Wolf */
function AboutItem(){AboutItem.prototype.setDate=function(e){var a=new Date(e);t.html(a.getFullYear().toString().substring(2,4)),o.html((a.getDate()<10?"0":"")+a.getDate()),n.html((a.getMonth()<9?"0":"")+(a.getMonth()+1))},AboutItem.prototype.setLocation=function(e,t){for(;e.toString().length<8;)e+="0";for(;t.toString().length<8;)t+="0";a.html(e.toString().substring(0,8)),i.html(t.toString().substring(0,8))},AboutItem.prototype.setDescription=function(e){return s.empty(),null==e?void void 0:(void 0,void s.html(e))},AboutItem.prototype.getDescriptionOffsetFromBottom=function(){return $(window).height()-r.offset().top};var e=$(".about-item"),t=e.find(".year"),o=e.find(".day"),n=e.find(".month"),a=e.find(".lat"),i=e.find(".lng"),r=e.find(".description"),s=r.children("span")}/*! Copyright Jan Wolf */
function Map(){Map.prototype.setLocation=function(e,t){o=new google.maps.LatLng(e,t),a.setCenter(o)},Map.prototype.setBottomMaskHeight=function(e){r.filter(".bottom").height(e)},Map.prototype.animateLocationMove=function(t,n,a,i){var r=28,s=Date.now(),l=o.lat(),d=o.lng(),u=e.data("intervalObject");void 0!==u&&clearInterval(u),e.data("intervalObject",setInterval(function(){var o=(Date.now()-s)/a,r=.5>o?2*o*o:-1+(4-2*o)*o;r=Math.round(1e3*r)/1e3;var u=l+(t-l)*r,p=d+(n-d)*r;Map.prototype.setLocation(u,p),i(u,p,r),r>=1&&clearInterval(e.data("intervalObject"))},1e3/r))};var e=$(".map");if(0!=e.length){var t=[{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{visibility:"on"},{lightness:5}]},{elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"landscape",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{visibility:"on"},{lightness:5}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#dfc0a9"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#ffeee3"}]}],o=new google.maps.LatLng(0,0),n={mapTypeControlOptions:{mapTypeIds:["Styled"]},center:o,zoom:5,scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,disableDoubleClickZoom:!0,keyboardShortcuts:!1,tilt:45,zoomControl:!1,draggable:!1,disableDefaultUI:!0,mapTypeId:"Styled"},a=new google.maps.Map(e[0],n),i=new google.maps.StyledMapType(t,{name:"Styled"});a.mapTypes.set("Styled",i);var r=$(".mask");google.maps.event.addListenerOnce(a,"bounds_changed",function(){r.appendTo(e.find(".gm-style"))}),google.maps.event.addDomListener(window,"resize",function(){a.setCenter(o)})}}/*! Copyright Jan Wolf */
function PulsarPoint(){PulsarPoint.prototype.start=function(){n=Date.now(),a=window.requestAnimationFrame(PulsarPoint.prototype.draw)},PulsarPoint.prototype.stop=function(){cancelAnimationFrame(a),PulsarPoint.prototype.clear()},PulsarPoint.prototype.clear=function(){i.clearRect(0,0,e.main,e.main),i.beginPath(),i.arc(e.main/2,e.main/2,t.dot_size/2,0,2*Math.PI,!1),i.fillStyle="rgba(0, 0, 0, 0.5)",i.fill()},PulsarPoint.prototype.draw=function(){PulsarPoint.prototype.clear();var o=Date.now(),r=(o-n)%t.duration/t.duration;i.beginPath(),i.arc(e.main/2,e.main/2,t.dot_size/2+(e.main-t.dot_size)/2*r,0,2*Math.PI,!1),i.lineWidth=t.thickness.start+r*(t.thickness.end-t.thickness.start);var s=t.alpha.start+r*(t.alpha.end-t.alpha.start);i.strokeStyle="rgba(0, 0, 0, "+s+")",i.stroke(),a=window.requestAnimationFrame(PulsarPoint.prototype.draw)};var e={main:500,main_rem:15},t={duration:1e4,dot_size:1/e.main_rem*e.main,thickness:{start:.1/e.main_rem*e.main,end:.5/e.main_rem*e.main},alpha:{start:.5,end:0}},o=$(".pulsar-point");o[0].width=e.main,o[0].height=e.main;var n,a,i=o[0].getContext("2d")}/*! Copyright Jan Wolf */
function Timeline(){Timeline.prototype.addOnChangeListener=function(e){o.push(e)},Timeline.prototype.getCurrentTarget=function(){return this.currentIndex},Timeline.prototype.setTarget=function(e){this.currentIndex=e;var t=this.items[e];n.children().removeClass("current").eq(this.currentIndex).addClass("current"),o.forEach(function(e){e(t)})},Timeline.prototype.nextTarget=function(){this.setTarget(this.currentIndex>=this.items.length-1?0:this.currentIndex+1)},Timeline.prototype.previousTarget=function(){this.setTarget(0==this.currentIndex?this.items.length-1:this.currentIndex-1)},Timeline.prototype.setData=function(o){this.items=o;for(var a=this,i=0;i<this.items.length;i++){var r=$("<div/>",{style:"height: "+100/this.items.length+"%;","class":"target",click:function(){a.setTarget($(this).index())}}),s=new Date(this.items[i].date);r.append($("<div/>",{"class":"indicator",html:'<span class="month">'+(s.getMonth()<9?"0":"")+(s.getMonth()+1)+'</span><span class="day">'+(s.getDate()<10?"0":"")+s.getDate()+'</span><span class="year">'+s.getFullYear().toString().substring(2,4)+"</span>"})),r.hover(e,t),$(n).append(r)}};var e=function(){$(this).addClass("hovered");var e=$(this).prev().addClass("hovered-surround-0"),t=$(this).next().addClass("hovered-surround-0");e=e.prev().addClass("hovered-surround-1"),t=t.next().addClass("hovered-surround-1"),e.prev().addClass("hovered-surround-2"),t.next().addClass("hovered-surround-2")},t=function(){$(this).siblings().andSelf().removeClass("hovered hovered-surround-0 hovered-surround-1 hovered-surround-2")},o=[],n=$(".timeline .inner")}/*! Copyright Jan Wolf */
function VolumeToggle(){VolumeToggle.prototype.toggleMute=function(){e.prop("muted",!e.prop("muted")),$(".volume-toggle").toggleClass("fa-volume-off fa-volume-up")},VolumeToggle.prototype.mute=function(){e.prop("muted",!0),$(".volume-toggle").addClass("fa-volume-off").removeClass("fa-volume-up")},VolumeToggle.prototype.unmute=function(){e.prop("muted",!1),$(".volume-toggle").removeClass("fa-volume-off").addClass("fa-volume-up")};var e=$("audio");$(".volume-toggle").click(function(){VolumeToggle.prototype.toggleMute()})}/*! Copyright Jan Wolf */
!function(e){e(document).ready(function(){var t=new Map,o=new AboutItem,n=new Timeline,a=new PulsarPoint,i=new VolumeToggle,r=e("audio");e.getJSON("data/targets.json",function(s){if(!(s.length<=0)){t.setLocation(s[0].lat,s[0].lng),n.addOnChangeListener(function(e){a.stop(),r.data("loops",0),r.off("loadstart"),r.on("loadstart",function(){void 0,r.data("ready",!1),this.currentTime=0}),r.trigger("pause"),r.attr("src","data/"+e.file),r.off("canplay"),r.on("canplay",function(){void 0,r.data("ready",!0)}),r.off("playwhenready"),r.on("playwhenready",function(){var e=function(){void 0,r.trigger("play"),a.start()};return r.data("ready")===!0?e():(void 0,void r.on("canplay",e))}),r.off("ended"),r.on("ended",function(){void 0;var n=r.data("loops");0==n&&(o.setDescription(e.description),t.setBottomMaskHeight(o.getDescriptionOffsetFromBottom())),r.data("loops",n+1),r.trigger("play")}),o.setDate(e.date),o.setDescription(null),void 0,t.setBottomMaskHeight(o.getDescriptionOffsetFromBottom()),void 0,t.animateLocationMove(e.lat,e.lng,2e3,function(e,t,n){o.setLocation(e,t),n>=1&&r.trigger("playwhenready")})}),n.setData(s),e(document).keyup(function(e){switch(e.keyCode?e.keyCode:e.which){case 37:case 38:n.previousTarget();break;case 39:case 40:n.nextTarget()}});var l=function(){var t=e(".overview").removeClass("fadeInDown fadeOutUp"),o=e(".stage").removeClass("fadeOutDown fadeInUp");e(this).is(".open-overview")&&(o.addClass("fadeOutDown"),t.show().addClass("fadeInDown"),i.mute()),e(this).is(".close-overview")&&(t.addClass("fadeOutUp"),o.addClass("fadeInUp"),setTimeout(function(){t.hide(),void 0===n.getCurrentTarget()?(n.setTarget(0),o.removeClass("hide-controls")):i.unmute()},1e3))};e(".close-overview").click(l),e(".open-overview").click(l).click(function(){var t=e(".close-overview"),o=t.attr("data-onclick-text");void 0!==o&&t.html(o)})}}),e(window).resize(function(){t.setBottomMaskHeight(o.getDescriptionOffsetFromBottom())})})}(jQuery);